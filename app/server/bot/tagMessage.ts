import { Context } from 'telegraf';

import { botState } from './tag';

import { getRandom } from '../utils/getRandom';
import { replyToMessage } from '../utils/replyToMessage';

const phrases = [
    'username, Ğ²ÑĞµĞ³Ğ´Ğ° Ñ€Ğ°Ğ´ Ñ‚Ğ²Ğ¾Ğ¸Ğ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ÑĞ¼! ğŸ˜Š',
    'username, Ğ´ÑĞ´ÑŒ, ÑĞºĞ°Ğ¶Ğ¸ ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ñ‡Ğ°Ñ, Ğ°?',
    'username, ĞºĞ°Ğº Ğ¶Ğµ Ğ±ĞµĞ· Ñ‚Ğ²Ğ¾ĞµĞ³Ğ¾ Ğ¼Ğ½ĞµĞ½Ğ¸Ñ? ğŸ¯',
    'username, Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ½Ğ°Ñ Ğ¶ĞµĞ¼Ñ‡ÑƒĞ¶Ğ¸Ğ½Ğ° Ğ¼ÑƒĞ´Ñ€Ğ¾ÑÑ‚Ğ¸! ğŸ’',
    'username, ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑ Ğ² ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ Ñ†Ğ¸Ñ‚Ğ°Ñ‚ ğŸ“–',
    'username, ÑÑ‚Ğ¾ Ğ²Ğ¾Ğ¹Ğ´Ñ‘Ñ‚ Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ‡Ğ°Ñ‚Ğ° ğŸ“œ',
    'username, Ñ‚Ğ°ĞºĞ¾Ğµ Ğ¼Ğ¾Ğ³ ÑĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‚Ñ‹! ğŸ‘‘',
    'username, Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ â­',
    'username, Ğ²ÑĞµ Ğ¶Ğ´Ğ°Ğ»Ğ¸ Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ Ñ‚Ğ²Ğ¾ĞµĞ³Ğ¾ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ñ â³',
    'username, ÑÑ‚Ğ¾ Ğ´Ğ¾ÑÑ‚Ğ¾Ğ¹Ğ½Ğ¾ Ğ¾Ğ²Ğ°Ñ†Ğ¸Ğ¹ ğŸ‘',
    'username, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ñ„Ğ¸ĞºÑĞ¸Ñ€ÑƒÑ Ñ„Ğ°ĞºÑ‚ Ğ¿Ñ€Ğ¸ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ñ ğŸ“',
    'username, Ñ‚Ğ²Ğ¾Ñ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ ÑĞ¸ÑÑ‚ÑŒ! âœ¨',
    'username, ĞºĞ°Ğº Ğ²ÑĞµĞ³Ğ´Ğ°, Ğ² Ğ½ÑƒĞ¶Ğ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ ğŸ•°ï¸',
    'username, ÑÑ‚Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¾ Ğ¼Ğ¾Ğ¹ Ğ´ĞµĞ½ÑŒ ğŸŒˆ',
    'username, ÑÑ‚Ğ°Ğ²Ğ»Ñ Ğ»Ğ°Ğ¹Ğº Ğ² ÑƒĞ¼Ğµ ğŸ‘',
    'username, Ñ‚Ğ°ĞºĞ¾Ğ¹ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµĞ¼ Ğ¾Ñ‚ Ñ‚ĞµĞ±Ñ ğŸ­',
    'username, Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ Ğ² ĞºĞ¾Ğ¿Ğ¸Ğ»ĞºÑƒ Ğ¼ÑƒĞ´Ñ€Ğ¾ÑÑ‚Ğ¸ ğŸ–',
    'username, Ğ²ÑĞµ Ğ·Ğ°Ğ¼ĞµÑ€Ğ»Ğ¸ Ğ² Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğ¸ Ñ‚Ğ²Ğ¾Ğ¸Ñ… ÑĞ»Ğ¾Ğ² ğŸ¤«',
    'username, ÑÑ‚Ğ¾ Ğ²Ğ¾Ğ¹Ğ´Ñ‘Ñ‚ Ğ² ÑƒÑ‡ĞµĞ±Ğ½Ğ¸ĞºĞ¸ ğŸ“š',
    'username, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ¾Ñ‚Ğ¼ĞµÑ‡Ğ°Ñ Ñ‚Ğ²Ğ¾Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ ğŸ“Š',
    'username, ĞºĞ°Ğº Ğ±ĞµĞ· Ñ‚Ğ²Ğ¾ĞµĞ³Ğ¾ Ñ†ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ²ĞºĞ»Ğ°Ğ´Ğ°? ğŸ’¼',
    'username, Ñ‚Ğ°ĞºĞ¾Ğµ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑƒÑĞ»Ñ‹ÑˆĞ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ñ‚ Ñ‚ĞµĞ±Ñ ğŸ™ï¸',
    'username, ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑ Ğ´Ğ»Ñ Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼ĞºĞ¾Ğ² ğŸ›ï¸',
    'username, ÑÑ‚Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ¾Ğ¸Ğ»Ğ¾ç­‰å¾…Ğ¸Ñ‚ÑŒ â°',
    'username, Ğ²ÑĞµ Ğ°Ğ¿Ğ»Ğ¾Ğ´Ğ¸Ñ€ÑƒÑÑ‚ ÑÑ‚Ğ¾Ñ ğŸ‘ğŸ‘ğŸ‘',
    'username, Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾ ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ÑÑÑŒ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ñ‚ĞµĞ»ÑŒĞ½ĞµĞµ ğŸ‘€',
    'username, ÑÑ‚Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¾ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¸Ğ³Ñ€Ñ‹ ğŸ®',
    'username, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ñ: Ñ‚Ñ‹ Ğ·Ğ²ĞµĞ·Ğ´Ğ° ğŸŒŸ',
    'username, Ñ‚Ğ°ĞºĞ¾Ğµ Ğ·Ğ°ÑĞ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ ğŸš¨',
    'username, Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ Ğ² ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ³ĞµĞ½Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¼Ñ‹ÑĞ»ĞµĞ¹ ğŸ§ ',
    'username, Ğ²ÑĞµ Ğ¶Ğ´Ğ°Ğ»Ğ¸ Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ ÑÑ‚Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ñ ğŸ‰',
    'username, ÑÑ‚Ğ¾ Ğ´Ğ¾ÑÑ‚Ğ¾Ğ¹Ğ½Ğ¾ Ñ€Ğ°Ğ¼ĞºĞ¸ Ğ¸ Ğ¼ĞµÑÑ‚Ğ° Ğ½Ğ° ÑÑ‚ĞµĞ½Ğµ ğŸ–¼ï¸',
    'username, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ñ„Ğ¸ĞºÑĞ¸Ñ€ÑƒÑ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ²Ğ°Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ ğŸ“¸',
    'username, Ñ‚Ğ²Ğ¾Ğ¸ ÑĞ»Ğ¾Ğ²Ğ° ĞºĞ°Ğº Ğ²ÑĞµĞ³Ğ´Ğ° Ğ²Ğ¾Ğ²Ñ€ĞµĞ¼Ñ âš¡',
    'username, ÑÑ‚Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ ÑĞ´ĞµĞ»Ğ°Ğ»Ğ¾ Ğ¼Ğ¾Ğ¹ Ğ´ĞµĞ½ÑŒ â˜€ï¸',
    'username, ÑÑ‚Ğ°Ğ²Ğ»Ñ Ğ¼ĞµÑ‚ĞºÑƒ "Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğº Ğ¿Ñ€Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ" ğŸ·ï¸',
    'username, Ñ‚Ğ°ĞºĞ¾Ğ¹ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·ÑƒĞµĞ¼ Ğ¾Ñ‚ Ñ‚ĞµĞ±Ñ ğŸ”®',
    'username, Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ Ğ² Ğ·Ğ¾Ğ»Ğ¾Ñ‚Ğ¾Ğ¹ Ñ„Ğ¾Ğ½Ğ´ Ñ‡Ğ°Ñ‚Ğ° ğŸ†',
    'username, Ğ²ÑĞµ Ğ·Ğ°Ñ‚Ğ°Ğ¸Ğ»Ğ¸ Ğ´Ñ‹Ñ…Ğ°Ğ½Ğ¸Ğµ ğŸ«',
    'username, ÑÑ‚Ğ¾ Ğ²Ğ¾Ğ¹Ğ´Ñ‘Ñ‚ Ğ² Ğ°Ğ½Ğ½Ğ°Ğ»Ñ‹ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ ğŸ“œ',
    'username, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ¾Ñ‚Ğ¼ĞµÑ‡Ğ°Ñ Ñ‚Ğ²Ğ¾Ğ¹ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ ğŸ¨',
    'username, ĞºĞ°Ğº Ğ±ĞµĞ· Ñ‚Ğ²Ğ¾ĞµĞ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ½Ğ¸Ñ†Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ? ğŸ”',
    'username, Ñ‚Ğ°ĞºĞ¾Ğµ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑƒÑĞ»Ñ‹ÑˆĞ°Ñ‚ÑŒ Ñ€Ğ°Ğ· Ğ² Ğ¶Ğ¸Ğ·Ğ½Ğ¸ ğŸ€',
    'username, ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑ ĞºĞ°Ğº ÑÑ‚Ğ°Ğ»Ğ¾Ğ½ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° ğŸ¥‡',
    'username, ÑÑ‚Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ğ»Ğ¾ Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ñƒ ğŸ’»',
    'username, Ğ²ÑĞµ Ğ¶Ğ´Ğ°Ğ»Ğ¸ Ñ‚Ğ²Ğ¾ĞµĞ³Ğ¾ Ğ²ĞµÑ€Ğ´Ğ¸ĞºÑ‚Ğ° âš–ï¸',
    'username, Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾ ÑƒĞ»ÑƒÑ‡ÑˆĞ¸Ğ»Ğ¾ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ ğŸ˜„',
    'username, ÑÑ‚Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¾ Ñ…Ğ¾Ğ´ Ğ¼Ñ‹ÑĞ»ĞµĞ¹ ğŸ§­',
    'username, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ñ: Ñ‚Ğ²Ğ¾Ğ¸ ÑĞ»Ğ¾Ğ²Ğ° Ğ¸Ğ¼ĞµÑÑ‚ Ğ²ĞµÑ âš–ï¸',
    'username, Ñ‚Ğ°ĞºĞ¾Ğµ Ğ·Ğ°ÑĞ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ¾Ğ¹Ğ´Ñ‘Ñ‚ Ğ² Ğ»ĞµĞ³ĞµĞ½Ğ´Ñ‹ ğŸ›ï¸',
    'username, Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ Ğ² ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ´Ğ»Ñ Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼ĞºĞ¾Ğ² ğŸ‘¶',
    'username, Ğ²ÑĞµ Ğ¶Ğ´Ğ°Ğ»Ğ¸ Ñ‚Ğ²Ğ¾ĞµĞ³Ğ¾ ÑĞºÑĞ¿ĞµÑ€Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¼Ğ½ĞµĞ½Ğ¸Ñ ğŸ“',
    'username, ÑÑ‚Ğ¾ Ğ´Ğ¾ÑÑ‚Ğ¾Ğ¹Ğ½Ğ¾ Ğ½Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸ Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ñ ğŸ†',
    'username, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ñ„Ğ¸ĞºÑĞ¸Ñ€ÑƒÑ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚ Ğ³ĞµĞ½Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ ğŸ’«',
];

export const handleTagMessage = (ctx: Context) => {
    const username = ctx.message?.from?.username;
    const tag = `@${username}`;
    const chatId = ctx.chat?.id || 0;

    const state = botState.get(chatId)!;

    if (!username || !chatId || !state?.targetUsers?.has(tag)) {
        return;
    }

    return replyToMessage(ctx, getRandom(phrases).replace('username', tag), false);
};
